<head>
    <style>
        table {
            border: solid 1px #e9e9e9;
            border-collapse: collapse;
            border-spacing: 0;
        }

        th, td {
            padding: 8px 16px;
            border: 1px solid  #e9e9e9;
            text-align: left;
        }

        th {
            background-color: #f7f7f7;
            color: #5c6b77;
            font-weight: 600;
        }
    </style>
</head>
<div id="app">
    <table>
        <th></th>
        <th>书籍名称</th>
        <th>出版日期</th>
        <th>价格</th>
        <th>购买数量</th>
        <th>移除</th>
        <tr v-for="(item,index) in list">
            <td>{{item.id}}</td>
            <td>{{item.name}}</td>
            <td>{{item.date}}</td>
            <!-- <td>{{getFinalPrice(item.price)}}</td> -->
            <td>{{item.price | showPrice}}</td>
            <td>
                <button @click="add(index)">+</button>
                    {{item.num}}
                <button :disabled="item.num == 0"@click="minus(index)">-</button>
            </td>
            <td><button @click="del(index)">移除</button></td>
        </tr>
    </table>
    <h2>总价格：{{totalPrice | showPrice}}</h2>
</div>
<script src="vue.js"></script>
<script>
    new Vue({
        el: "#app",
        data: {
            list: [
                {
                    id: 1,
                    name: "Spring源码深度解析",
                    date: "2019-12-2",
                    price: 23,
                    num: 1
                },
                {
                    id: 2,
                    name: "Java多线程编程核心技术",
                    date: "2019-12-2",
                    price: 33,
                    num: 1
                },
                {
                    id: 3,
                    name: "大话设计模式",
                    date: "2019-12-2",
                    price: 58,
                    num: 1
                },
                {
                    id: 4,
                    name: "消息中间件实践",
                    date: "2019-12-2",
                    price: 99,
                    num: 1
                },
            ]

        },
        methods:{
            getFinalPrice(p) {
                return p.toFixed(2)
            },
            add(index) {
                this.list[index].num++;
            },
            minus(index) {
                if(this.list[index].num >0){
                    this.list[index].num--;
                }
                
            },
            del(index) {
                this.list.splice(index,1)
            }
        },
        filters:{
            // 过滤器
            showPrice(p) {
                return p.toFixed(2)
            }
        },
        computed:{
            totalPrice: function(){
                let price = 0;
                console.log(this.list)
                
                for(a of this.list) {
                    price += a.price * a.num;
                }
                return price;
            }
        }
    })
</script>